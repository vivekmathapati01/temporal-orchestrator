openapi: 3.0.0
info:
  title: Temporal Workflow API
  version: 0.1.0
  description: API for starting and managing Temporal workflows

servers:
  - url: http://localhost:8000
    description: Local development server

paths:
  /api/v1/workflows/start:
    post:
      summary: Start a workflow
      description: Start a new Temporal workflow
      operationId: startWorkflow
      tags:
        - Workflows
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StartWorkflowRequest'
            example:
              workflow_type: MarketingOrchestratorWorkflow
              workflow_id: campaign-001
              input:
                campaign_id: CAMP-001
                campaign_name: Spring Launch
                budget: 100000
      responses:
        '200':
          description: Workflow started successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StartWorkflowResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    StartWorkflowRequest:
      type: object
      required:
        - workflow_type
        - workflow_id
        - input
      properties:
        workflow_type:
          type: string
          description: Workflow class name
          example: MarketingOrchestratorWorkflow
        workflow_id:
          type: string
          description: Unique workflow identifier
          example: campaign-001
        input:
          type: object
          description: Workflow input data
          additionalProperties: true
        task_queue:
          type: string
          description: Task queue name (optional, defaults to configured queue)
          example: marketing-orchestrator-queue

    StartWorkflowResponse:
      type: object
      required:
        - workflow_id
        - run_id
        - message
      properties:
        workflow_id:
          type: string
          description: The workflow identifier
          example: campaign-001
        run_id:
          type: string
          description: The workflow run identifier
          example: 8303fc92-ee93-4739-8ddf-792d92b86393
        message:
          type: string
          description: Success message
          example: Workflow started successfully

    ErrorResponse:
      type: object
      required:
        - detail
      properties:
        detail:
          type: string
          description: Error message
          example: An error occurred

